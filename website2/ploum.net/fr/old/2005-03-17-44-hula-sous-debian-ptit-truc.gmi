# Hula sous Debian : pâ€™tit truc

=> http://www.hula-project.org 
=> ../files/old/hula.png hula

Attention, ce billet est purement technique et concerne les curieux voulant installer Hula sous Debian. Dans un sens, on peut le voir comme une forme de poÃ©sie ultra-geek (la fleur Hula se dÃ©pose dans la spirale Debian grÃ¢ce Ã  la magie dâ€™apt-get), mais bonâ€¦ passez plutÃ´t au billet suivant ! ðŸ˜‰

=> /2005/03/16/43-et-la-poesie-bordel au billet suivant

Vous Ãªtes encore lÃ  ?

EspÃ¨ce de geek ![1]

=> ../files/old/Geek.gif greek !

GrÃ¢ce au travail dâ€™Alex Hudson, installer Hula sous Debian (Sarge ou Ubuntu) ne pose aucun problÃ¨me. Tout est clairement expliquÃ© sur son site.

=> http://www.eurobob.eclipse.co.uk/hula/ sur son site

La premiÃ¨re chose Ã  faire est surtout de couper tous les services qui pourraient rentrer en conflit avec hula! Faites spÃ©cialement attention Ã  couper votre serveur SMTP (Exim ou Postfix, gÃ©nÃ©ralement).

> /etc/init.d/postfix stop

Puis installez Hula ( apt-get install hula aprÃ¨s avoir ajoutÃ© la source deb http://www.eurobob.eclipse.co.uk/hula debs/ )

=> http://www.eurobob.eclipse.co.uk/hula http://www.eurobob.eclipse.co.uk/hula

Il faut ensuite lancer hulasetup :

> hulasetup

(voir les options dans la doc â€“ notons que chez moi, lâ€™option dns nâ€™a eu aucun effet. De toutes faÃ§ons, elle nâ€™est plus rÃ©ellement nÃ©cessaire, les derniÃ¨res versions utilisent enfin resolv.conf )

=> http://www.hula-project.org/Installation_tutorial la doc

Enfin, vous pouvez lancez hula :

> /etc/init.d/hula start

Et vous pouvez vous amuser (interface dâ€™admin sur le port 89, webmail sur le 8080). Dâ€™ailleurs si quelquâ€™un sait comment on utilise cette p*$!# dâ€™interface dâ€™admin, je suis preneur. En effet, yâ€™a pas moyen de configurer quoi que ce soit Ã  jeun. Mais visiblement, lâ€™ergonome qui a conÃ§u Â« Ã§a Â» ne connaissait pas le mot Â« Ã  jeun Â». Passonsâ€¦

(Ã  noter que un /etc/init.d/hula stop mets trÃ¨s trÃ¨s longtemps Ã  arrÃªter la machine, killall est votre ami, mais nâ€™abusez pas du -9 )

Le truc Ã  savoir

Hula fourni donc un serveur SMTP. Et si vous voulez que vos utilisateurs puissent recevoir des mails, il faut que ce serveur SMTP soit opÃ©rationnel. Cependant, Hula ne fournit pas de MTA (Mail Transport Agent). Et beaucoup de paquet Debian, notemment mysql-server, dÃ©pendent dâ€™un MTA. Pour fournir un MTA, exim4 ou postfix sont gÃ©nÃ©ralement installÃ©s. Parfois mÃªme exim ou sendmail. Mais ces programmes sont aussi des serveurs SMTP et donc empÃªche Hula de fonctionner, du moins la partie SMTP !

La premiÃ¨re solution est dâ€™installer postfix ou exim et de le couper. Câ€™est bourrin, mais Ã§a marche. Gros dÃ©faut : les mails systÃ¨mes ne sont plus envoyÃ©s. Cela concerne aussi les mails envoyÃ©s depuis, par exemple, la fonction PHP mail, comme les mails dâ€™envoi de password. Bref, câ€™est pas idÃ©al.

Câ€™est ici quâ€™intervient la petite touche parfaite, qui vient complÃ©ter admirablement le tableau : nullmailer !

=> http://untroubled.org/nullmailer/ nullmailer

nullmailer est tout simplement un MTA qui ne fait rien que de donner les mails quâ€™il reÃ§oit Ã  un autre serveur SMTP.

> apt-get install nullmailer

ensuite, il suffit dâ€™indiquer dans /etc/nullmailer/remotes le serveur SMTP, Ã  savoirâ€¦. localhost bien sÃ»r ! Et voilÃ , câ€™est tout beau, tout propre, Ã§a marche, wÃ©Ã©Ã©, on est content ðŸ™‚

Câ€™est technique ? Je vous avais prÃ©venu !

PS : Un autre truc si jamais vous cassez votre config Hula câ€™est de bouger toutes la configuration, de relancer hulasetup puis de rÃ©Ã©craser la config recrÃ©Ã©e :

> /etc/init.d/hula stop
> mv /usr/var/mdb /root/hula/
> mv /usr/var/netmail /root/hula
> /usr/sbin/hulasetup
> cp -pr â€“reply=yes /root/hula/mdb/* /usr/var/mdb
> cp -pr â€“reply=yes /root/hula/netmail/* /usr/var/netmail
> /etc/init.d/hula start

ici Ã§a a marchÃ© ðŸ˜‰

#### Notes

[1] Et dire que pendant que jâ€™Ã©cris cette ligne, Pat mâ€™envoie un message disant : Â« subversion, apache et apache2 sont dans un chroot â€¦ lequel tombe Ã  lâ€™eau ?? Â» Ils sont parmi nous !
